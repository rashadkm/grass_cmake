Item: r.proj

I've done some hacking on r.proj and I now have a patch that                  
       - aborts if the input map is outside current region                     
       - trims the output map to the current region or smaller                 
       - does not allocate more memory than necessary for projecting the       
          overlapping parts of the input map and output region                          
       - aligns cell edges and centers of the output map exactly to those      
          of output region                                                              
       - matches (unless changed explicitly) resolution exactly to that        
           of output region                                                              
       - during overlap checks, passes cell centers to PROJ instead of         
         edges (which are invalid in many projections, causing 
         'Error in do_proj' aborts)                                                                       
       - allows projecting azimuthal, conical etc maps even if north is        
          not upward or east is not rightward (no more 'north must be 
          greater than south' or 'east must be graeater than west' errors)                           
     

The question about overlapping cells in projections from adjacent maps          
that have no overlaps (e.g. DEM30 slices): They can't be avoided. E.g.          
some of the right (east) column cells of one DEM30 map and some of the          
left (west) column cells of the afjacent DEM30 map will eventually be           
projected into the same cell of a conical or azimuthal region. Simply           
because meridians get closer to each other when you approach the poles.         
But what is worse is that these overlapping cells will probably have            
different values, because these values were resampled from nearest              
neighbours in different input maps. So it's better to r.patch the input         
maps first, and then do the projection (if you have the memory                  
necessary to read in a large input map.)                                        
                                            
Most of Martin Schroeder's original code is left untouched. Basically I         
just added a function, boardwalk(), that makes the checks for overlapping       
parts of input map and output region. Plus I moved the memory allocation        
routine forward in the main code, and made some other smaller                   
changes. There are some comments in boardwalk.c, and under Changes in           
main.c   

Morten Hulden <morten@ngb.se>
